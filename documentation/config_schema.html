<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2. Config Schema (config.json)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        table { width: 100%; border-collapse: collapse; margin-top: 1.5rem; margin-bottom: 1.5rem; }
        th, td { border: 1px solid #e2e8f0; padding: 0.75rem 1rem; text-align: left; vertical-align: top; }
        th { background-color: #f8fafc; font-weight: 600; }
        pre { background-color: #f1f5f9; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; margin-top: 1rem; margin-bottom: 1rem; }
        code { font-family: 'Courier New', Courier, monospace; }
        .prose h1 { font-size: 2.25rem; font-weight: 700; margin-bottom: 1.5rem; border-bottom: 1px solid #e2e8f0; padding-bottom: 0.5rem; }
        .prose h2 { font-size: 1.875rem; font-weight: 600; margin-top: 2.5rem; margin-bottom: 1rem; border-bottom: 1px solid #e2e8f0; padding-bottom: 0.5rem; }
        .prose h3 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; }
        .prose h4 { font-size: 1.25rem; font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }
        .prose p, .prose ul { margin-bottom: 1.25rem; line-height: 1.75; }
        .prose ul { list-style-type: disc; padding-left: 1.5rem; }
        .prose a { color: #2563eb; text-decoration: none; font-weight: 500; }
        .prose a:hover { text-decoration: underline; }
        .prose code { background-color: #f1f5f9; padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-size: 0.9em; }
        .sidebar { width: 250px; position: fixed; left: 0; top: 0; height: 100vh; overflow-y: auto; background-color: #1f2937; }
        .content-wrapper { margin-left: 250px; }
        .nav-link { display: block; padding: 0.75rem 1.5rem; color: #d1d5db; text-decoration: none; border-left: 3px solid transparent; }
        .nav-link:hover { background-color: #374151; color: white; }
        .nav-link.active { background-color: #374151; color: white; border-left-color: #3b82f6; font-weight: 600; }
        .nav-section { position: relative; }
        .nav-section-header { display: flex; align-items: center; justify-content: space-between; cursor: pointer; }
        .nav-section-header:hover { background-color: #374151; }
        .nav-expand-icon { transition: transform 0.2s; font-size: 0.75rem; margin-right: 0.5rem; }
        .nav-expand-icon.expanded { transform: rotate(90deg); }
        .nav-subsections { display: none; background-color: #111827; }
        .nav-subsections.expanded { display: block; }
        .nav-subsection-link { display: block; padding: 0.5rem 1.5rem 0.5rem 2.5rem; color: #9ca3af; text-decoration: none; font-size: 0.875rem; border-left: 3px solid transparent; }
        .nav-subsection-link:hover { background-color: #374151; color: white; }
        .nav-subsection-link.active { background-color: #374151; color: white; border-left-color: #3b82f6; }
        .nav-subsection { position: relative; }
        .nav-subsection-header { display: flex; align-items: center; justify-content: space-between; cursor: pointer; padding: 0.5rem 1.5rem 0.5rem 2.5rem; color: #9ca3af; font-size: 0.875rem; border-left: 3px solid transparent; }
        .nav-subsection-header:hover { background-color: #374151; color: white; }
        .nav-subsection-header.active { background-color: #374151; color: white; border-left-color: #3b82f6; }
        .nav-subsection-subsections { display: none; background-color: #0f172a; }
        .nav-subsection-subsections.expanded { display: block; }
        .nav-subsection-subsections .nav-subsection-link { padding-left: 3.5rem; }
        @media (max-width: 768px) {
            .sidebar { width: 100%; height: auto; position: relative; }
            .content-wrapper { margin-left: 0; }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">

    <nav class="sidebar">
        <div class="py-4">
            <a href="index.html" class="nav-link">1. Overview</a>
            <div class="nav-section">
                <div class="nav-section-header nav-link active" onclick="toggleNavSection(this)">
                    <span>2. Config Schema (config.json)</span>
                    <span class="nav-expand-icon expanded">▶</span>
                </div>
                <div class="nav-subsections expanded">
                    <a href="#metadata" class="nav-subsection-link">2.1. Metadata</a>
                    <div class="nav-subsection">
                        <div class="nav-subsection-header" onclick="toggleNavSection(this)">
                            <a href="#experiment-flow" style="flex: 1; text-decoration: none; color: inherit;">2.2. Experiment Flow</a>
                            <span class="nav-expand-icon">▶</span>
                        </div>
                        <div class="nav-subsection-subsections">
                            <a href="#experiment-flow-example" class="nav-subsection-link">2.2.1. Example</a>
                        </div>
                    </div>
                    <a href="#full-example" class="nav-subsection-link">2.3. Full Example</a>
                </div>
            </div>
            <a href="trial_schema.html" class="nav-link">3. Trial Schema (trial.jsonl)</a>
            <a href="instruction_schema.html" class="nav-link">4. Instruction Schema</a>
            <a href="human_data_schema.html" class="nav-link">5. Human Data Schema</a>
            <a href="appendix.html" class="nav-link">Appendix</a>
        </div>
    </nav>
    <script>
        function toggleNavSection(header) {
            const section = header.parentElement;
            const subsections = section.querySelector('.nav-subsections, .nav-subsection-subsections');
            const icon = header.querySelector('.nav-expand-icon');
            
            if (subsections && subsections.classList.contains('expanded')) {
                subsections.classList.remove('expanded');
                if (icon) icon.classList.remove('expanded');
            } else if (subsections) {
                subsections.classList.add('expanded');
                if (icon) icon.classList.add('expanded');
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            const hash = window.location.hash;
            if (hash) {
                const target = document.querySelector(hash);
                if (target) {
                    const subsectionLink = document.querySelector(`a[href="${hash}"]`);
                    if (subsectionLink) {
                        subsectionLink.classList.add('active');
                        // Expand all parent sections if collapsed
                        let current = subsectionLink;
                        while (current) {
                            const subsection = current.closest('.nav-subsection');
                            const section = current.closest('.nav-section');
                            
                            if (subsection) {
                                const subsections = subsection.querySelector('.nav-subsection-subsections');
                                const icon = subsection.querySelector('.nav-expand-icon');
                                if (subsections && !subsections.classList.contains('expanded')) {
                                    subsections.classList.add('expanded');
                                    if (icon) icon.classList.add('expanded');
                                }
                                current = subsection;
                            } else if (section) {
                                const subsections = section.querySelector('.nav-subsections');
                                const icon = section.querySelector('.nav-expand-icon');
                                if (subsections && !subsections.classList.contains('expanded')) {
                                    subsections.classList.add('expanded');
                                    if (icon) icon.classList.add('expanded');
                                }
                                break;
                            } else {
                                break;
                            }
                        }
                    }
                }
            }
        });
    </script>

    <div class="content-wrapper">
    <div class="container mx-auto max-w-4xl p-6 md:p-12 bg-white shadow-lg rounded-lg my-12 prose prose-lg">

        <h1>2. File Specification: Config Schema (<code>config.json</code>)</h1>
        <p>The <code>config.json</code> file provides high-level metadata about the experiment and defines the overall structure (or "flow") of the trials presented to the participant.</p>

        <section id="metadata">
            <h2>2.1. Metadata</h2>
            <p>These top-level keys describe the study and are used for dataset indexing and citation.</p>
            <div class="overflow-x-auto">
                <table>
                    <thead>
                        <tr>
                            <th>Key</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>experimentName</code></td>
                            <td>String</td>
                            <td>The full title of the experiment or study.</td>
                        </tr>
                        <tr>
                            <td><code>description</code></td>
                            <td>String</td>
                            <td>A brief paragraph describing the task.</td>
                        </tr>
                        <tr>
                            <td><code>paperDOI</code></td>
                            <td>String</td>
                            <td>The DOI link to the original publication (e.g., "https://doi.org/...").</td>
                        </tr>
                        <tr>
                            <td><code>taskType</code></td>
                            <td>Array of Strings</td>
                            <td>Keywords describing the cognitive task (e.g., "Social Cognition", "Decision Making").</td>
                        </tr>
                        <tr>
                            <td><code>responseType</code></td>
                            <td>Array of Strings</td>
                            <td>All response types used, e.g., <code>["multi-choice", "slider", "free-text"]</code>.</td>
                        </tr>
                        <tr>
                            <td><code>contributors</code></td>
                            <td>Array of Strings</td>
                            <td>List of researcher names who prepared the data.</td>
                        </tr>
                        <tr>
                            <td><code>stimuli_count</code></td>
                            <td>Integer</td>
                            <td>Total number of unique stimuli/trials defined for this experiment (i.e., the number of entries in <code>trial.jsonl</code> that are referenced by <code>config.json</code>).</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>The <code>stimuli_count</code> field provides a quick summary of dataset size. Participant demographics (<code>participants_info</code>) and the total number of ratings (<code>judgment_count</code>) are now specified in the Human Data files; see the Human Data Schema.</p>
        </section>

        <section id="experiment-flow">
            <h2>2.2. Experiment Flow (<code>experimentFlow</code>)</h2>
            <p>To control the order and grouping of multiple trials, an <code>experimentFlow</code> array is used. Each entry in this array is a dictionary describing a full flow definition (e.g., for a specific experimental condition). The list should enumerate every condition included in the experiment. If conditions differ so substantially that they require separate instructions, assets, or config logic, consider splitting them into separate experiment folders instead. Make this decision on a case-by-case basis.</p>
            <div class="overflow-x-auto">
                <table>
                    <thead>
                        <tr>
                            <th>Key</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>blocks</code></td>
                            <td>Array of Arrays of Strings</td>
                            <td>A nested array. Each inner array is a "block" of trials. Each string is a <code>stimuli_id</code> from <code>trial.jsonl</code>.</td>
                        </tr>
                        <tr>
                            <td><code>block_randomization</code></td>
                            <td>Boolean</td>
                            <td>If <code>true</code>, the order of the "blocks" (the inner arrays) is randomized for each participant.</td>
                        </tr>
                        <tr>
                            <td><code>stimuli_randomization</code></td>
                            <td>Boolean</td>
                            <td>If <code>true</code>, the order of the trial <code>stimuli_id</code>s <em>within</em> each block is randomized.</td>
                        </tr>
                        <tr>
                            <td><code>experimental_condition</code></td>
                            <td>String (optional)</td>
                            <td>An optional label identifying the experimental condition associated with this flow definition.</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 id="experiment-flow-example">2.2.1. Example <code>experimentFlow</code></h3>
            <pre><code>"experimentFlow": [
  {
    "experimental_condition": "condition_1",
    "blocks": [
      [ "trial_1_1", "trial_1_2", "trial_1_3" ],
      [ "trial_2_1", "trial_2_2" ]
    ],
    "block_randomization": true,
    "stimuli_randomization": false
  },
  {
    "experimental_condition": "condition_2",
    "blocks": [
      [ "trial_3_1", "trial_3_2" ]
    ],
    "block_randomization": true,
    "stimuli_randomization": false
  }
]</code></pre>
            <p>In this example:</p>
            <ul>
                <li>There are two experimental conditions. The interface will randomly present one of the two conditions to the participant. You do not need to specify the experimental condition field if there is only one condition.</li>
                <li>Within the first experimental condition, there are two blocks of trials. Because <code>block_randomization</code> is <code>true</code>, the experiment will randomly present either Block 1 (<code>["trial_1_1", ...]</code>) or Block 2 (<code>["trial_2_1", ...]</code>) first.</li>
            </ul>
        </section>

        <section id="full-example">
            <h2>2.3. Full <code>config.json</code> Example</h2>
            <p>Here is what a complete <code>config.json</code> file looks like, combining the metadata and the experiment flow. The <code>stimuli_id</code> strings (e.g., <code>"trial_1_1"</code>) in the <code>blocks</code> array refer to the trial objects defined in your <a href="trial_schema.html">Trial Schema (<code>trial.jsonl</code>)</a> file.</p>
            <pre><code>{
  "experimentName": "Epistemic Language Understanding",
  "description": "Participants observe short animations and answer questions about the agent's goals and beliefs.",
  "paperDOI": "https://doi.org/10.1111/example.doi.12345",
  "taskType": [
    "Social Cognition", 
    "Theory of Mind"
  ],
  "responseType": [
    "multi-choice",
    "single-slider"
  ],
  "contributors": [
    "Jane Doe",
    "John Smith"
  ],
  "stimuli_count": 48,
  "experimentFlow": [
    {
      "blocks": [
        [ "trial_1_1", "trial_1_2", "trial_1_3" ],
        [ "trial_2_1", "trial_2_2", "trial_2_3", "trial_2_4" ]
      ],
      "block_randomization": true,
      "stimuli_randomization": false
    }
  ]
}</code></pre>
        </section>

    </div>
    </div>

</body>
</html>